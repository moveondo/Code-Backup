

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>曹操贷最快10分钟放款</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="//m.ppdaicdn.com/act/caocao/css/swiper.min.css">
    <link rel="stylesheet" type="text/css" href="//m.ppdaicdn.com/act/caocao/css/reset.css">
    <link rel="stylesheet" type="text/css" href="//m.ppdaicdn.com/act/caocao/css/style.css">
	<script type="text/javascript">
	(function (d, s, i) {
	var f = d.getElementsByTagName(s)[0],j = d.createElement(s);
	j.async = true; j.src ='//ubt.ppdaicdn.com/ppubt.js?Landing=true&appid=' + i ;
	f.parentNode.insertBefore(j, f);
	})(document, 'script', '1');
	</script>
</head>
<body>
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide slide1" style="padding-bottom:20px;">
                <img src="//m.ppdaicdn.com/act/caocao/img/banner.png" class="banner">
                <img src="//m.ppdaicdn.com/act/caocao/img/text.png" class="text">
                <div class="num"><span id="amount" class="amount">3,152,672,400</span>元</div>
                <div class='phone'>
                    <label>手机号</label>
                    <input type="tel" maxLength="11" placeholder="请输入常用手机号" name="phoneNum" class="phoneNum" id="num1"/>
                </div>
                <a class="downLoad" id="btn1">
                    <img src="//m.ppdaicdn.com/act/caocao/img/btn01.png" class="btn">
                </a>
				<img class="btn-slide" src="//m.ppdaicdn.com/act/caocao/img/slide.png">
            </div>
            <div class="swiper-slide slide2">
                <img src="//m.ppdaicdn.com/act/caocao/img/center.png" class="center">
                <img src="//m.ppdaicdn.com/act/caocao/img/usersay.png" class="usersay">
                <div class="cmmtArea">
                    <div class="cmmtCont">
                        <img src="//m.ppdaicdn.com/act/caocao/img/cmt1.png">
                        <img src="//m.ppdaicdn.com/act/caocao/img/cmt2.png">
                    </div>
                </div>
            </div>
            <div class="swiper-slide slide3">
                <div class="cmmtArea">
                    <div class="cmmtCont">
                        <img src="//m.ppdaicdn.com/act/caocao/img/cmt3.png">
                        <img src="//m.ppdaicdn.com/act/caocao/img/cmt4.png">
                        <img src="//m.ppdaicdn.com/act/caocao/img/cmt5.png" style="border-bottom:none;">
                    </div>
                </div>
                <img src="//m.ppdaicdn.com/act/caocao/img/tel.png" class="tel">
            </div>
        </div>
        <div class="swiper-pagination"></div>
    </div>
    <footer>
        <div class="mask"></div>
        <div class="ftCont">
            <div class='phone'>
                <label>手机号</label>
                <input type="tel" maxLength="11" placeholder="请输入常用手机号" name="mobile" class="phoneNum" id="num2"/>
            </div>
            <a class="downLoad" id="btn2">
                <img src="//m.ppdaicdn.com/act/caocao/img/btn01.png" class="btn">
            </a>
        </div>
    </footer>
    <script src="//m.ppdaicdn.com/act/caocao/js/jquery.min.js"></script>
    <script src="//m.ppdaicdn.com/act/caocao/js/swiper.min.js"></script>
    <script>

    //获取渠道参数；
    var flag;
    var mob1;
    var _src = GetQueryString("resource");
        _src = !_src ? "" : _src;
    var channel = 'number';

    //获取页面url参数；
    function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)","i");
        var r = window.location.search.substr(1).match(reg);
        if (r!=null) return (r[2]); return null;
    }
    var  isWeiXin = function() {
        var ua = window.navigator.userAgent.toLowerCase();
        if (ua.match(/MicroMessenger/i) == 'micromessenger') {
            return true;
        } else {
            return false;
        }
    }
    var isWx       = isWeiXin(),
        isiOS      = navigator.userAgent.match('iPad')
                     || navigator.userAgent.match('iPhone')
                     || navigator.userAgent.match('iPod'),
         dlurl =  GetQueryString("url"),
         iosURL     = !dlurl ? "https://itunes.apple.com/cn/app/id1104239394" : dlurl,
        isAndroid  = navigator.userAgent.match('Android');
	var os = isiOS ? "ios" : "Android";
   var downLoad= function(){
            if (isWx) {
                window.location.href="//m.ppdai.com/act/caocao/down.html?source="+_src+"&url="+dlurl;
            }else if(isiOS){
                window.location.href=iosURL;
            }else{
                var Url = "//m.ppdai.com/Down/CaoCaoLoan/"+_src;
                window.location.href=Url;
            }
        };
    //点击传值并下载；
   $('#btn1,#btn2').on('click',function(){
        var mob1 = $.trim($(this).prev().find('input').val());
        if(mob1 ==""){
            $(this).prev().find('input').attr('placeholder','请先输入手机号~').addClass('redPlhd');
            return;
        }else if(!/^(13|14|15|17|18)[0-9]{9}$/.test(mob1)){
            $(this).prev().find('input').val('').attr('placeholder','请输入正确的手机号~');
            return;
        }
        flag=false;
        $.ajax({
                type :'get',
                async: false,
                dataType: 'JSONP',
                url  : "//mobiccdai.ppdai.com/ccdai/api/distribute/saveDownloadRecord.htm",
                     //"//wirelessgatewaydev.ppdai.com:8080/ccdai/api/distribute/saveDownloadRecord.htm?",
                data : {mobile:mob1,channel:channel,subChannel:_src,os:os,sendMsg:false},
                success: function(data){
                    data =$.parseJSON(data);
                    if(data.result == 0){
                        console.log('请求成功');
                       downLoad();
                    }else{
                        console.log("返回失败");
                        downLoad();
                    }
                },
                error: function(XMLHttpRequest, textStatus, errorThrown){
                    console.log("请求失败");
                    downLoad();
                }
            })
         flag=true;
    })
    //轮播及弹窗显示效果
    var t;
    var mySwiper = new Swiper('.swiper-container', {
        pagination: '.swiper-pagination',
        paginationClickable: true,
        mousewheelControl : true,
        direction: 'vertical',
        moveStartThreshold:100,
        loop:false,
        onSlideChangeStart:function(swiper){
                if(!flag){
                    clearTimeout(t);
                    var idx = swiper.activeIndex;
                    $('footer').hide();
                    if(idx == 1){
                        t=setTimeout("$('footer').show()",1000);
                    }else if(idx == 2){
                        $('footer').show();
                    }
                }
            }

    });
    //数字累加效果
    var currentNum = parseInt($("#amount").html().replace(/\,/g,''));
    setInterval("jump()",1500);
    function jump(){
        currentNum += 400;
        $("#amount").html(thousands(currentNum));
    }
    //千位分隔符；
    function thousands(num){
            num = num.toString();
            if(/^-?\d+\.?\d+$/.test(num)){
                if(/^-?\d+$/.test(num)){
                    num =num + ",00";
                }else{
                    num = num.replace(/\./,',');
                }
                while(/\d{4}/.test(num)){
                    num = num.replace(/(\d+)(\d{3}\,)/,'$1,$2');
                }
                num = num.replace(/\,(\d*)$/,'');
            }
            return num;
        }

    </script>
</body>
</html>
